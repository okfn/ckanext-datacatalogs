<form id="catalog-edit" class="ckan" method="post" 
  py:attrs="{'class':'has-errors'} if errors else {}"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:py="http://genshi.edgewall.org/"
  xmlns:xi="http://www.w3.org/2001/XInclude">

<div class="error-explanation" py:if="error_summary">
<h2>Errors in form</h2>
<p>The form contains invalid entries:</p>
<ul>
  <li py:for="key, error in error_summary.items()">${"%s: %s" % (key, error)}</li>
</ul>
</div>

<fieldset id="catalog-information">
  <legend>Catalog Information</legend>
  <dl>
    <dt><label class="field_opt" for="title">Title</label></dt>
    <dd><input id="title" name="title" type="text" value="${data.get('title', '')}"/></dd>
    <dd class="instructions basic">A short descriptive title for the catalog.</dd>
    <dd class="instructions further">It should not be a description though - save that for the Description field. 
    Do not give a trailing full stop.</dd>
    <dd class="field_error" py:if="errors.get('title', '')">${errors.get('title', '')}</dd>

    <dt><label class="field_req" for="name">Name *</label></dt>
    <dd><input id="name" maxlength="100" name="name" type="text" value="${data.get('name', '')}" /></dd>
    <dd class="instructions basic">A unique identifier for the catalog.</dd>
    <dd class="instructions further">It should be broadly humanly readable, in the spirit of Semantic Web URIs. 
    Only use an acronym if it is widely recognised. Renaming is possible but discouraged.</dd>
    <dd class="hints">2+ characters, lowercase, using only 'a-z0-9' and '-_'</dd>
    <dd class="field_error" py:if="errors.get('name', '')">${errors.get('name', '')}</dd>

    <dt><label class="field_opt" for="homepage">Homepage</label></dt>
    <dd><input id="homepage" name="homepage" type="text" value="${data.get('homepage', '')}"/></dd>
    <dd class="instructions basic">The homepage (URL) for the catalog.</dd>
    <dd class="hints">e.g. http://www.ckan.net</dd>
    <dd class="field_error" py:if="errors.get('homepage', '')">${errors.get('homepage', '')}</dd>

    <dt><label class="field_opt" for="description">Description</label></dt>
    <dd><textarea cols="60" id="description" name="description" rows="15">${data.get('description', '')}</textarea></dd>
    <dd class="instructions basic">The main description of the catalog.</dd>
    <dd class="instructions further">It is often displayed with the catalog title. 
    In particular, it should start with a short sentence that describes the catalog succinctly, 
    because the first few words alone may be used in some views of the catalogs.</dd>
    <dd class="hints">You can use 
    <a href="http://daringfireball.net/projects/markdown/syntax">Markdown formatting</a> here.</dd>

    <dt><label class="field_opt" for="publisher">Publisher</label></dt>
    <dd><input id="publisher" name="publisher" type="text" value="${data.get('publisher', '')}"/></dd>
    <dd class="instructions basic">The publisher of the catalog.</dd>
    <dd class="hints">e.g. Open Knowledge Foundation</dd>

    <dt><label class="field_opt" for="language">Language</label></dt>
    <dd><input id="language" name="language" type="text" value="${data.get('language', '')}"/></dd>
    <dd class="instructions basic">The language(s) that the catalog is available in.</dd>
    <dd class="instructions further">These should be stored as a list of 2-digit
    <a href="http://en.wikipedia.org/wiki/ISO_639-1">ISO 639-1</a> language codes.
    </dd>
    <dd class="hints">e.g. en es fr</dd>

    <dt><label class="field_opt" for="spatial">Spatial/Geographic Coverage</label></dt>
    <dd><input id="spatial" name="spatial" type="text" value="${data.get('spatial', '')}"/></dd>
    <dd class="instructions basic">The geographic area covered by the catalog.</dd>
    <dd class="hints">e.g. [TODO: add example]</dd>
    <dd class="field_error" py:if="errors.get('spatial', '')">${errors.get('spatial', '')}</dd>

    <dt><label class="field_opt" for="tags">Tags</label></dt>
    <dd>
      <input class="long tagComplete" data-tagcomplete-queryparam="incomplete" 
               data-tagcomplete-url="/api/2/util/tag/autocomplete" id="tag_string" name="tag_string" size="60" type="text" 
               value="${data.get('tag_string') or ' '.join([tag['name'] for tag in data.get('tags', [])])}" />
    </dd>
    <dd class="instructions basic">Terms that may link this catalog to similar ones. 
    For more information on conventions, see 
    <a href="http://wiki.okfn.org/ckan/doc/faq#TagConventions">this wiki page</a>.</dd>
    <dd class="hints">e.g [TODO: add example]</dd>
    <dd class="field_error" py:if="errors.get('tag_string', '')">${errors.get('tag_string', '')}</dd>
  </dl>
</fieldset>

<div class="submit">
  <input name="preview" type="submit" value="Preview" />
  <input id="save" name="save" type="submit" value="Save" />
</div>

<p class="hints">
<strong>Important:</strong> By submitting content, you agree to release your contributions
  under the open license specified on the <a href="/license">license page</a>. Please <strong>refrain</strong> from editing this page if you are <strong>not</strong> happy to do this.
</p>

</form>
